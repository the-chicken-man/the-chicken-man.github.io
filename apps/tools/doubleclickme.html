

<!DOCTYPE html>
<html lang="en">
<head>
   
    <title>Home</title>
    <link rel="icon" href="https://www.gstatic.com/classroom/ic_product_classroom_144.png" sizes="144x144">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
     <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap">
    <style>
        body {
            background-color: #000000;
            font-family: 'Courier New', monospace;
            overflow-x: hidden;
            color: #ffff00;
            line-height: 1.6;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
    
        ::-webkit-scrollbar {
            width: 12px;
        }
    
        ::-webkit-scrollbar-track {
            background: #2a2a2a;
            border-radius: 10px;
        }
    
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #555, #888);
            border-radius: 10px;
            transition: background 0.3s, transform 0.3s;
        }
    
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, #888, #aaa);
            transform: scale(1.1);
        }
    
        @keyframes pop-out {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
    
        
    
        
    
        
    
        
    
        .title {
            text-align: center;
            font-size: 58px;
            background: linear-gradient(270deg, yellow, yellow, yellow, yellow, yellow);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 600% 600%;
            animation: gradient 8s ease infinite;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin: 20px 0;
            letter-spacing: 1px;
            filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.5));
            border-radius: 10px;
            padding: 10px 20px;
            backdrop-filter: blur(5px);
            transition: transform 0.3s ease, color 0.3s ease;
        }

        .title:hover {
            transform: scale(1.05);
            color: rgba(255, 255, 255, 0.8);
        }
    
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            25% { background-position: 100% 50%; }
            50% { background-position: 0% 50%; }
            75% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    
        @keyframes borderGrow {
            0% {
                border: 3px transparent solid;
                transform: scale(1);
            }
            50% {
                border: 3px white solid;
                transform: scale(1.05);
            }
            100% {
                border: 3px white solid;
                transform: scale(1);
            }
        }
    
        @keyframes rainbowGlow {
            0% { box-shadow: 0 0 10px red, 0 0 20px red; }
            14% { box-shadow: 0 0 10px orange, 0 0 20px orange; }
            28% { box-shadow: 0 0 10px yellow, 0 0 20px yellow; }
            42% { box-shadow: 0 0 10px green, 0 0 20px green; }
            57% { box-shadow: 0 0 10px blue, 0 0 20px blue; }
            71% { box-shadow: 0 0 10px indigo, 0 0 20px indigo; }
            85% { box-shadow: 0 0 10px violet, 0 0 20px violet; }
            100% { box-shadow: 0 0 10px red, 0 0 20px red; }
        }
    
        
    
        .tab {
            color: #ecf0f1; 
            border: 2px solid #ecf0f1; 
            border-radius: 25px;
            box-sizing: border-box; 
            width: calc(100% + 20px); 
            height: calc(100% + 20px); 
            padding: 10px; 
            font-size: 20px;
             font-family: 'Press Start 2P', sans-serif;
            position: relative; 
            overflow: hidden; 
            background: #1c1c1c; 
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.8); 
        }

        .tab:not(:disabled):hover { 
            color: #B59410; 
            transform: translateY(-4px);
            box-shadow: 0 8px 9px rgba(255, 255, 255, 0.5); 
            background: #2a2a2a; 
        }

        

        .tabs {
            display: flex;
            justify-content: center; 
            align-items: center; 
            gap: 15px; 
        }
    
        
    
       
    
        .select-button {
            position: relative;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            color: white;
            background-color: transparent; 
            border: 3px solid transparent; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            transition: transform 0.3s ease;
            animation: none;
        }

        .select-button:hover {
            transform: scale(1.1);
            animation: rainbowGlow 1.5s infinite; 
            z-index: 1;
        }
    
        .navbar { 
            background: linear-gradient(90deg, #1a73e8 , #0d47a1); 
            padding: 15px; 
            display: flex; 
            gap: 10px; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }
    
        .url-bar { 
            flex-grow: 1; 
            padding: 8px; 
            border-radius: 24px; 
            border: none; 
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            transition: box-shadow 0.3s;
        }
    
        .url-bar:focus {
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.5);
            outline: none;
        }
    
        .go-btn { 
            background: white; 
            border: none; 
            padding: 8px 24px; 
            border-radius: 24px; 
            cursor: pointer; 
            transition: background 0.3s, transform 0.3s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
    
        .go-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300%;
            height: 300%;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transition: width 0.5s, height 0.5s, top 0.5s, left 0.5s;
            z-index: 0;
            transform: translate(-50%, -50%) scale(0);
        }
    
        .go-btn :hover::after {
            width: 400%;
            height: 400%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1);
        }
    
        .go-btn:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
            z-index: 1;
        }
    
        .content-frame { 
            width: 100%; 
            height: calc(100vh - 60px); 
            border: none; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s;
            border-radius: 10px;
            overflow: hidden;
        }
    
        .content-frame:hover {
            transform: scale(1.01);
        }
    
        .loader { 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            z-index: 1000; 
            animation: spin 1s linear infinite; 
        }
    
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    
        .fancy-border {
            border: 5px solid transparent;
            border-image: linear-gradient(45deg, #ff0080, #ff8c00, #00ff8c, #00bfff, #8000ff);
            border-image-slice: 1;
            transition: border 0.5s;
        }
    
        .fancy-border:hover {
            border-width: 10px;
        }
    
        .shadow-effect {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            transition: box-shadow 0.3s;
        }
    
        .shadow-effect:hover {
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.7);
        }
    
        .pulse-animation {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    
   
   
     
    <script> document.addEventListener('DOMContentLoaded', () => { const versionElement = document.querySelector('.version'); const statusElement = document.querySelector('.update-status'); if (!versionElement) return;
    const versionMatch = versionElement.textContent.match(/v\d+\.\d+/);
    if (!versionMatch) return;

    const currentVersion = versionMatch[0];
    const docID = "1qIX0ofXUJYfw47u4s7ztUj9VCUo9SsEtQxXLO6YfLww";

    fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(`https://docs.google.com/document/d/${docID}/export?format=txt`)}`)
        .then(response => response.json())
        .then(data => {
            const versionData = data.contents.match(/(?:WEBSITE|VERSION)[:\s]*?(v\d+\.\d+)/i);
            if (!versionData || !versionData[1]) return;

            const latestVersion = versionData[1];
            if (currentVersion !== latestVersion) {
                fetch("https://raw.githubusercontent.com/toothpastenetwork/toothpastenetwork.github.io/main/index.html")
                    .then(response => {
                        if (!response.ok) throw new Error('Network response was not ok');
                        return response.text();
                    })
                    .then(html => {
                        document.open();
                        document.write(html);
                        document.close();
                    })
                    .catch(error => {
                        statusElement.textContent = "Failed to load the latest version. Please check your connection.";
                        statusElement.style.color = "red";
                    });
            } else {
                statusElement.textContent = "You are on the latest version.";
                statusElement.style.color = "lime";
            }
        })
        .catch(error => {
            statusElement.textContent = "Failed to check for updates.";
            statusElement.style.color = "red";
        });
    });
    </script>

   

    <script>
        const docID = "15pS7jkF3Q9avR-OqfQkoMtdLKCrhsKEfApP4SKSySF4";

        fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(`https://docs.google.com/document/d/${docID}/export?format=txt`)}`)
            .then(response => response.json())
            .then(data => {
                const content = data.contents;

                const iframe = document.getElementById('docIframe');
                const docContent = `${content}`;
                const blob = new Blob([docContent], { type: 'text/html' });
                const iframeUrl = URL.createObjectURL(blob);
                iframe.src = iframeUrl;
            })
            .catch(error => console.error('Error fetching the document:', error));
    </script>

  
    
    <script>
        let offline = false;
        if (window.location.href.includes("file")) {
            const downloadButton = document.querySelector('.download-button');
            if (downloadButton) {
                downloadButton.style.display = 'none';
                offline = true;
            }
        }
    </script>

    <div class="tabs">
        
       
    </div>
</body>
<script>
let panicButtonLink = 'https://www.classroom.google.com';
const panicButtonClass = document.querySelectorAll('.panicbutton');
function activate_panicbutton() {
    panicButtonClass.forEach(button => {
        button.setAttribute('href', panicButtonLink);
        if (window.location.href.includes('script.googleusercontent.com')) {
            button.setAttribute('target', '_blank'); 
        } else {
            button.removeAttribute('target');
        }
    });
}
function visit(launchRequest) {
    const elements = document.body.children;
    for (let i = elements.length - 1; i >= 0; i--) {
        const element = elements[i];
        if (!element.classList.contains('panicbutton') && 
            !element.classList.contains('title') && 
            !element.classList.contains('tabs') && 
            !element.classList.contains('centered-download') &&
            !element.classList.contains('update-status') && 
            !element.classList.contains('adCenter') &&
            !element.classList.contains('version')) {
            element.remove();
        }
    }
    launchRequest();
}


function websitePlayer(title, link, description) {
    const containerDiv = document.createElement('div');
    Object.assign(containerDiv.style, {
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        padding: '20px',
        fontFamily: 'Segoe UI, sans-serif',
        fontWeight: 'bolder',
        color: '#fff'
    });
    document.body.appendChild(containerDiv);

    const reportButton = document.createElement('button');
    reportButton.textContent = 'Report Blocked / Not Working';
    Object.assign(reportButton.style, {
        width: '100%',
        maxWidth: '600px',
        padding: '12px',
        fontSize: '16px',
        cursor: 'pointer',
        border: 'none',
        borderRadius: '8px',
        background: 'linear-gradient(135deg, #ff416c, #ff4b2b)',
        color: 'white',
        fontWeight: 'bold',
        marginBottom: '20px',
        boxShadow: '0 3px 10px rgba(255, 0, 0, 0.4)',
        transition: 'transform 0.2s ease, box-shadow 0.2s ease'
    });
    reportButton.onmouseover = () => reportButton.style.transform = 'scale(1.05)';
    reportButton.onmouseout = () => reportButton.style.transform = 'scale(1)';
    reportButton.onclick = () => window.open('https://forms.gle/ifBB6ym5W23MGx8b6', '_blank');
    containerDiv.appendChild(reportButton);

    const gameContainer = document.createElement('div');
    Object.assign(gameContainer.style, {
        display: 'flex',
        alignItems: 'flex-start',
        justifyContent: 'center',
        flexWrap: 'wrap',
        gap: '30px',
        width: '100%'
    });
    containerDiv.appendChild(gameContainer);

    const gamePlayerDiv = document.createElement('div');
    Object.assign(gamePlayerDiv.style, {
        border: '2px solid #0f0',
        borderRadius: '20px',
        background: 'rgba(0, 0, 0, 0.8)',
        padding: '20px',
        boxShadow: '0 0 20px rgba(0, 255, 0, 0.4)',
        width: '300px',
        flexShrink: '0'
    });

    const gamePlayerName = document.createElement('h1');
    gamePlayerName.textContent = title;
    Object.assign(gamePlayerName.style, {
        textAlign: 'center',
        fontSize: '24px',
        marginBottom: '10px',
        fontWeight: 'bolder',
        backgroundImage: 'linear-gradient(to right, #00BFFF, #00FF7F)', 
        WebkitBackgroundClip: 'text',
        WebkitTextFillColor: 'transparent'
    });


    const gamePlayerDescription = document.createElement('p');
    gamePlayerDescription.textContent = description;
    Object.assign(gamePlayerDescription.style, {
        textAlign: 'center',
        fontSize: '14px',
        opacity: 0.8,
        marginBottom: '20px'
    });

    gamePlayerDiv.append(gamePlayerName, gamePlayerDescription);

    const sizeControls = document.createElement('div');
    sizeControls.style.marginBottom = '20px';

    const createSizeControl = (labelText, input) => {
        const wrapper = document.createElement('div');
        wrapper.style.display = 'flex';
        wrapper.style.alignItems = 'center';
        wrapper.style.marginBottom = '10px';

        const label = document.createElement('label');
        label.textContent = labelText;
        Object.assign(label.style, {
            marginRight: '10px',
            color: '#ccc',
            width: '90px'
        });

        Object.assign(input.style, {
            flex: '1',
            padding: '6px',
            borderRadius: '4px',
            border: '1px solid #555',
            background: '#111',
            color: '#fff',
            width: '100px'
        });

        wrapper.append(label, input);
        return wrapper;
    };

    const widthInput = document.createElement('input');
    widthInput.type = 'number';
    widthInput.min = '100';
    widthInput.max = '2000';

    const heightInput = document.createElement('input');
    heightInput.type = 'number';
    heightInput.min = '100';
    heightInput.max = '2000';
    heightInput.value = '600';

    sizeControls.appendChild(createSizeControl('Width (px):', widthInput));
    sizeControls.appendChild(createSizeControl('Height (px):', heightInput));
    gamePlayerDiv.appendChild(sizeControls);

    const buttonContainer = document.createElement('div');
    Object.assign(buttonContainer.style, {
        display: 'flex',
        flexWrap: 'wrap',
        justifyContent: 'center',
        gap: '10px',
        marginTop: '10px'
    });

    const baseButtonStyle = {
        background: 'linear-gradient(135deg, #00f260, #0575e6)',
        color: '#fff',
        border: 'none',
        padding: '10px 18px',
        borderRadius: '999px',
        fontWeight: 'bold',
        fontSize: '14px',
        cursor: 'pointer',
        boxShadow: '0 4px 10px rgba(0,0,0,0.2)',
        transition: 'all 0.25s ease-in-out',
        letterSpacing: '0.5px',
        minWidth: '140px'
    };

    const hoverIn = e => {
        e.target.style.transform = 'scale(1.1)';
        e.target.style.filter = 'brightness(1.1)';
    };

    const hoverOut = e => {
        e.target.style.transform = 'scale(1)';
        e.target.style.filter = 'brightness(1)';
    };

    const iframe = document.createElement('iframe');
    Object.assign(iframe.style, {
        flex: '1',
        height: '600px',
        border: '2px solid white',
        borderRadius: '15px',
        minWidth: '400px'
    });
    iframe.id = 'game-iframe';
    iframe.src = link.link;
    iframe.setAttribute('sandbox', 'allow-same-origin allow-scripts allow-pointer-lock allow-forms');

    iframe.addEventListener('click', () => {
        alert('Iframe clicked, focusing...');
        iframe.contentWindow.focus();
        iframe.contentWindow.document.body.requestPointerLock();
    });

    gameContainer.append(gamePlayerDiv, iframe);

    widthInput.value = Math.floor(iframe.getBoundingClientRect().width);
    heightInput.value = Math.floor(iframe.getBoundingClientRect().height);

    widthInput.addEventListener('input', () => {
        iframe.style.width = `${Math.max(widthInput.value, 100)}px`;
    });

    heightInput.addEventListener('input', () => {
        iframe.style.height = `${Math.max(heightInput.value, 100)}px`;
    });

    const buttons = [
        {
            text: 'Toggle Fullscreen',
            onClick: () => {
                if (!document.fullscreenElement) {
                    iframe.requestFullscreen().catch(err =>
                        console.error(`Fullscreen error: ${err.message} (${err.name})`)
                    );
                } else {
                    document.exitFullscreen();
                }
            }
        },
        {
            text: 'Refresh',
            onClick: () => {
                iframe.src = iframe.src;
            }
        },
        
        {
            text: 'Mostly Fullscreen',
            onClick: () => {
                document.body.innerHTML = '';
                document.body.appendChild(iframe);
                Object.assign(iframe.style, {
                    width: '100vw',
                    height: '100vh',
                    border: 'none',
                    borderRadius: '0',
                });
            }
        }

    ];

    buttons.forEach(({ text, onClick }) => {
        const btn = document.createElement('button');
        btn.textContent = text;
        Object.assign(btn.style, baseButtonStyle);
        btn.addEventListener('mouseover', hoverIn);
        btn.addEventListener('mouseout', hoverOut);
        btn.addEventListener('click', onClick);
        buttonContainer.appendChild(btn);
    });

    gamePlayerDiv.appendChild(buttonContainer);

    const searchbarElement = document.querySelector('.searchbar');
    if (searchbarElement) searchbarElement.remove();
}


function deleteSelectButtons() {
    const selectButtons = document.querySelectorAll('div.select-button');
    selectButtons.forEach(button => {
        button.remove();
    });
}

function home() {
    let title = document.createElement('h1');
    title.textContent = 'Home';
    title.style.color = 'white'; 
    title.style.textAlign = 'center'; 
    title.style.fontSize = '50px';
    title.style.marginBottom = '20px'; 
    document.body.appendChild(title);

    let description = document.createElement('p');
    description.textContent = 'Welcome to Chicken Browser';
    description.style.color = 'yellow'; 
    description.style.textAlign = 'center'; 
    description.style.fontSize = '30px';
    description.style.marginBottom = '20px'; 
    document.body.appendChild(description);0


    let update_button = document.createElement('a');
    update_button.style.display = 'block'; 
    update_button.style.margin = '20px auto'; 
    update_button.style.textAlign = 'center'; 
    update_button.style.color = 'yellow';
    update_button.style.backgroundColor = 'rgba(0, 128, 0, 0.8)';
    update_button.style.border = '2px solid white';
    update_button.style.borderRadius = '10px';
    update_button.style.fontSize = '22px';
    update_button.style.padding = '15px 30px';
    update_button.style.textDecoration = 'none';
    update_button.style.transition = 'background-color 0.3s, transform 0.3s';
    update_button.href = 'https://chicken-os.pages.dev';
    update_button.textContent = 'Main ChickenOS';
    update_button.setAttribute('target', '_blank'); 
    update_button.onmouseover = () => {
        update_button.style.backgroundColor = 'white';
        update_button.style.transform = 'scale(1.05)';
    };
    update_button.onmouseout = () => {
        update_button.style.backgroundColor = 'rgba(0, 128, 0, 0.8)';
        update_button.style.transform = 'scale(1)';
    };
    document.body.appendChild(update_button);
}










async function proxyLoad(url, frame) {
    const urlToLoad = url.includes('.') 
        ? `https://${url}` 
        : `https://html.duckduckgo.com/html?q=${encodeURIComponent(url)}`;

    const proxyBase = "https://toothpaste.bekekes390.workers.dev/?url=";
    const proxyUrl = proxyBase + encodeURIComponent(urlToLoad);

    console.log('Browser fetching:', proxyUrl);

    try {
        const response = await fetch(proxyUrl);
        if (!response.ok) throw new Error('Network response was not ok');

        const html = await response.text();
        const baseUrl = new URL(urlToLoad).origin;

        const processed = html
            .replace(/<head>/i, `<head><base href="${baseUrl}/">`)
            .replace(/<body([^>]*)>/i, `<body$1 style="margin:0;">`);

        const blob = new Blob([processed], { type: 'text/html' });
        const blobUrl = URL.createObjectURL(blob);

        console.log('Blob URL ready:', blobUrl);

        frame.src = blobUrl;

        frame.onload = () => {
            console.log('Frame loaded!');

            // Check that the iframe really loaded
            try {
                const links = frame.contentDocument.querySelectorAll('a');
                links.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const newUrl = link.href;
                        proxyLoad(newUrl, frame);
                    });
                });
            } catch (e) {
                console.warn('Frame access error:', e);
            }
        };

    } catch (error) {
        console.error('Browser Error:', error);
        frame.srcdoc = `
            <div style="color:white;text-align:center;font-size:20px;font-family:sans-serif;padding:50px;">
            Error loading content.<br>${error.message}</div>
        `;
    }
}







function proxy() {
    const existingProxy = document.querySelector('.proxy-container');
    if (existingProxy) existingProxy.remove();

    const container = document.createElement('div');
    container.className = 'proxy-container';
    container.style.marginTop = '20px';

    const tabBar = document.createElement('div');
    tabBar.style.display = 'flex';
    tabBar.style.gap = '10px';
    tabBar.style.marginBottom = '10px';

    const refreshButton = document.createElement('button');
    refreshButton.textContent = 'Refresh Currebt Tab';
    refreshButton.style.padding = '5px 10px';
    refreshButton.style.borderRadius = '5px';
    refreshButton.style.cursor = 'pointer';
    refreshButton.style.backgroundColor = '#fff';
    refreshButton.style.color = '#000';

    const newTabButton = document.createElement('button');
    newTabButton.textContent = 'Create New Tab';
    newTabButton.style.padding = '5px 10px';
    newTabButton.style.borderRadius = '5px';
    newTabButton.style.cursor = 'pointer';
    newTabButton.style.backgroundColor = '#fff';
    newTabButton.style.color = '#000';
    
    

     const devOptionsButton = document.createElement('button');
    devOptionsButton.textContent = 'HTML';
    devOptionsButton.style.padding = '5px 10px';
    devOptionsButton.style.borderRadius = '5px';
    devOptionsButton.style.cursor = 'pointer';
    devOptionsButton.style.backgroundColor = '#fff';
    devOptionsButton.style.color = '#000';

    const tabList = document.createElement('div');
    tabList.style.display = 'flex';
    tabList.style.gap = '5px';
    tabList.style.flexGrow = '1';
    tabList.style.overflowX = 'auto';

    const contentArea = document.createElement('div');
    contentArea.style.position = 'relative';
    contentArea.style.height = '500px';

    let currentTab = createTab('tp://newtab');
    tabList.appendChild(currentTab.element);
    contentArea.appendChild(currentTab.content);

    newTabButton.addEventListener('click', () => {
        const newTab = createTab('tp://newtab');
        tabList.appendChild(newTab.element);
        contentArea.appendChild(newTab.content);
        switchTab(newTab);
    });

    refreshButton.addEventListener('click', () => {
        if (currentTab) {
            let webframe = currentTab.content.querySelector('iframe')
            webframe.style.display = 'block';
            webframe.contentWindow.location.reload();
        }
    });

    devOptionsButton.addEventListener('click', () => {
        toggleDevOptions();
    });

    tabBar.append(refreshButton, newTabButton, devOptionsButton, tabList);
    container.append(tabBar, contentArea);
    document.body.appendChild(container);

    function createTab(titleText) {
        const tab = document.createElement('div');
        tab.style.display = 'flex';
        tab.style.alignItems = 'center';
        tab.style.padding = '5px 15px';
        tab.style.borderRadius = '5px 5px 0 0';
        tab.style.cursor = 'pointer';
        tab.style.backgroundColor = '#333';
        tab.style.transition = 'background-color 0.3s ease, transform 0.3s ease';
        tab.style.transform = 'translateX(-100%)';

        const title = document.createElement('span');
        title.textContent = titleText === 'tp://newtab' ? 'New Tab' : titleText;
        title.style.marginRight = '10px';
        title.style.color = '#fff';

        const closeButton = document.createElement('button');
        closeButton.textContent = '×';
        closeButton.style.color = 'white';
        closeButton.style.padding = '0 5px';
        closeButton.style.borderRadius = '50%';
        closeButton.style.cursor = 'pointer';

        const content = document.createElement('div');
        content.style.position = 'absolute';
        content.style.width = '100%';
        content.style.height = '100%';
        content.style.display = 'none';

        const addressBar = document.createElement('div');
        addressBar.style.display = 'flex';
        addressBar.style.gap = '10px';
        addressBar.style.marginBottom = '10px';

        const urlInput = document.createElement('input');
        urlInput.placeholder = 'Enter URL or search';
        urlInput.style.flexGrow = '1';
        urlInput.style.padding = '8px';
        urlInput.style.borderRadius = '15px';
        urlInput.style.border = ' 1px solid #444';
        urlInput.style.backgroundColor = '#111';
        urlInput.style.color = '#fff';

        const goButton = document.createElement('button');
        goButton.textContent = 'Go';
        goButton.style.color = 'black';
        goButton.style.padding = '8px 16px';
        goButton.style.borderRadius = '15px';
        goButton.style.backgroundColor = 'white';
        goButton.style.cursor = 'pointer';

        const frame = document.createElement('iframe');
        frame.style.width = '100%';
        frame.style.height = 'calc(100% - 40px)';
        frame.style.border = '1px solid #333';
        frame.style.borderRadius = '10px';
        frame.style.backgroundColor = '#000';

        const loadingOverlay = document.createElement('div');
        loadingOverlay.style.position = 'absolute';
        loadingOverlay.style.top = '0';
        loadingOverlay.style.left = '0';
        loadingOverlay.style.width = '100%';
        loadingOverlay.style.height = '100%';
        loadingOverlay.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
        loadingOverlay.style.color = 'white';
        loadingOverlay.style.display = 'flex';
        loadingOverlay.style.alignItems = 'center';
        loadingOverlay.style.justifyContent = 'center';
        loadingOverlay.style.fontSize = '20px';
        loadingOverlay.textContent = 'The proxy is in beta so this may not work / Loading...';
        loadingOverlay.style.display = 'none'; 

        addressBar.append(urlInput, goButton);
        content.append(addressBar, frame, loadingOverlay);

        const loadNewTabContent = () => {
            if (titleText === 'tp://newtab') {
                const newTabContent = `
<div style="
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    background: linear-gradient(135deg, #1a1a1a, #000000);
    overflow: hidden;
    position: relative;
    font-family: 'Poppins', sans-serif;
">
    <div style="
        animation: fadeIn 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        transform-origin: center;
        position: relative;
        z-index: 2;
    ">
        <h1 style="
            font-size: 60px;
            font-weight: 800;
            font-family: 'Courier New', monospace;
            text-align: center;
            background: linear-gradient(45deg, #00ffff, #70ffb8);
            -webkit-background-clip: text;
            background-clip: text;
            color: yellow;
            text-shadow: 0 0 40px rgba(0, 255, 255, 0.7);
            margin-bottom: 35px;
            letter-spacing: -1.5px;
           
        ">Chicken Browser</h1>

        <div style="
            position: relative;
            margin: 2rem 0;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 20px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            animation: pulse 3s infinite;
        ">
            <h1 style="
                font-size: 24px;
                font-weight: 400;
                text-align: center;
                background: linear-gradient(45deg, #ff4444, #ffaa00);
                -webkit-background-clip: text;
                background-clip: text;
                color: yellow;
                text-shadow: 0 0 30px rgba(255, 68, 68, 0.5);
                margin-bottom: 30px;
                letter-spacing: -0.5px;
                
            ">Browse the web safely and in style</h1>
            
            <div style="position: relative; margin: 0 auto; width: fit-content;">
                <input type="text" 
                    id="searchBox" 
                    placeholder="Search The Web Using DuckDuckGo" 
                    style="
                        padding: 18px 50px 18px 30px;
                        width: 600px;
                        border-radius: 50px;
                        border: none;
                        background: rgba(255,  255, 255, 0.1);
                        color: #fff;
                        font-size: 17px;
                        backdrop-filter: blur(15px);
                        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
                        position: relative;
                        z-index: 2;
                    "
                    onfocus="this.style.background='rgba(255, 255, 255, 0.2)'; this.style.boxShadow='0 0 35px rgba(0, 255, 255, 0.5)'; this.style.transform='scale(1.02)'"
                    onblur="this.style.background='rgba(255, 255, 255, 0.1)'; this.style.boxShadow='0 4px 30px rgba(0, 0, 0, 0.5)'; this.style.transform='scale(1)'"
                />
                <svg style="
                    position: absolute;
                    right: 25px;
                    top: 50%;
                    transform: translateY(-50%);
                    width: 24px;
                    height: 24px;
                    fill: rgba(255, 255, 255, 0.6);
                    z-index: 3;
                    pointer-events: none;
                " viewBox="0 0 24 24">
                    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 5 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                </svg>
            </div>

            <h1 style="
                font-size: 20px;
                font-weight: 300;
                text-align: center;
                color: rgba(255, 255, 255, 0.7);
                margin: 25px 0 0 0;
                letter-spacing: 0.5px;
            ">Online Safety • Mask Your IP • Browse With Security • Tabs</h1>
        </div>
    </div>

    <div style="
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
    ">
        <div style="
            position: absolute;
            width: 800px;
            height: 800px;
            background: radial-gradient(circle, rgba(0 , 255, 255, 0.1) 0%, transparent 70%);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: gradientPulse 8s infinite;
        "></div>
        <div style="
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.05);
            pointer-events: none;
            animation: particleAnimation 10s linear infinite;
        "></div>
    </div>
</div>

<style>
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
    }
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.02); }
        100% { transform: scale(1); }
    }
    @keyframes pulseWarning {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }
    @keyframes gradientPulse {
        0% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
        50% { opacity: 0.1; transform: translate(-50%, -50%) scale(1.2); }
        100% { opacity: 0.3; transform: translate(-50%, -50%) scale( 1); }
    }
    @keyframes particleAnimation {
        0% { background-position: 0% 0%; }
        100% { background-position: 100% 100%; }
    }

    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap');
    
    input::placeholder {
        color: rgba(255, 255, 255, 0.5);
        transition: all 0.3s ease;
        letter-spacing: 0.5px;
    }
    
    input:focus::placeholder {
        transform: translateX(15px);
        opacity: 0.2;
    }

    h1:hover {
        transform: scale(1.02);
    }

    body {
        margin: 0;
        overflow-x: hidden;
    }
</style>
`;
                frame.srcdoc = newTabContent;

                frame.onload = () => {
                    const searchBox = frame.contentWindow.document.getElementById('searchBox');
                    if (searchBox) {
                        searchBox.addEventListener('keypress', e => {
                            if (e.key === 'Enter') {
                                const query = searchBox.value;
                                const googleUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
                                proxyLoad(googleUrl, frame);
                            }
                        });
                    }
                };
            } else {
                proxyLoad(urlInput.value, frame);
            }
        };

        goButton.addEventListener('click', () => {
            const oldFrame = content.querySelector('iframe');
            if (oldFrame) oldFrame.remove(); // ⬅️ Remove old frame (with dirty srcdoc)

            const newFrame = document.createElement('iframe');
            newFrame.style.width = '100%';
            newFrame.style.height = 'calc(100% - 40px)';
            newFrame.style.border = '1px solid #333';
            newFrame.style.borderRadius = '10px';
            newFrame.style.backgroundColor = '#000';

            content.appendChild(newFrame); // ⬅️ Attach clean iframe

            proxyLoad(urlInput.value, newFrame); // ⬅️ Load URL into fresh frame
            title.textContent = urlInput.value;
        });

        urlInput.addEventListener('keypress', e => {
            if (e.key === 'Enter') {
                const oldFrame = content.querySelector('iframe');
                if (oldFrame) oldFrame.remove();

                const newFrame = document.createElement('iframe');
                newFrame.style.width = '100%';
                newFrame.style.height = 'calc(100% - 40px)';
                newFrame.style.border = '1px solid #333';
                newFrame.style.borderRadius = '10px';
                newFrame.style.backgroundColor = '#000';

                content.appendChild(newFrame);

                proxyLoad(urlInput.value, newFrame);
                title.textContent = urlInput.value;
            }
        });


        tab.addEventListener('click', () => switchTab({ element: tab, content }));
        closeButton.addEventListener('click', e => {
            e.stopPropagation();
            tab.style.transition = 'transform 0.3s ease';
            tab.style.transform = 'translateX(-100%)';
            setTimeout(() => {
                tab.remove();
                content.remove();
            }, 300);
        });

        tab.append(title, closeButton);
        loadNewTabContent();

        setTimeout(() => {
            tab.style.transform = 'translateX(0)';
        }, 0);

        return { element: tab, content };
    }

    function switchTab(newTab) {
        currentTab.content.style.display = 'none';
        currentTab = newTab;
        currentTab.content.style.display = 'block';
    }

    function toggleDevOptions() {
        const existing = document.querySelector('.dev-options-container');
        if (existing) return existing.remove();

        const container = Object.assign(document.createElement('div'), {
            className: 'dev-options-container',
            style: `
                position: fixed;
                top: 50px; right: 50px;
                width: 320px;
                height: auto;
                background: #1a1a1a;
                color: #eee;
                padding: 0;
                overflow: hidden;
                z-index: 10000;
                font-family: monospace;
                border: 1px solid #333;
                border-radius: 6px;
            `
        });

        const header = Object.assign(document.createElement('div'), {
            textContent: 'HTML stuff',
            style: `
                padding: 8px;
                background: #333;
                cursor: move;
                user-select: none;
                font-weight: bold;
            `
        });

        const body = Object.assign(document.createElement('div'), {
            style: 'padding: 12px;'
        });

        const label = Object.assign(document.createElement('div'), {
            textContent: 'HTML Editor',
            style: 'margin-bottom: 8px; font-weight: bold; font-size: 14px;'
        });

        const editor = Object.assign(document.createElement('textarea'), {
            style: `
                width: 100%;
                height: 240px;
                background: #0d0d0d;
                color: #0f0;
                border: 1px solid #333;
                border-radius: 6px;
                padding: 8px;
                resize: vertical;
            `,
            placeholder: 'Edit iframe HTML...'
        });

        const frame = currentTab?.content?.querySelector('iframe');
        if (frame) editor.value = frame.srcdoc || '';

        const controls = Object.assign(document.createElement('div'), {
            style: 'margin-top: 12px; display: flex; gap: 8px;'
        });

        const updateBtn = Object.assign(document.createElement('button'), {
            textContent: 'Apply',
            style: `
                flex: 1;
                background: #00ff00;
                color: #000;
                border: none;
                padding: 6px;
                border-radius: 4px;
                cursor: pointer;
            `
        });

        const closeBtn = Object.assign(document.createElement('button'), {
            textContent: 'Close',
            style: `
                flex: 1;
                background: #ff0000;
                color: #000;
                border: none;
                padding: 6px;
                border-radius: 4px;
                cursor: pointer;
            `
        });

        updateBtn.onclick = () => frame && (frame.srcdoc = editor.value);
        closeBtn.onclick = () => container.remove();

        controls.append(updateBtn, closeBtn);
        body.append(label, editor, controls);
        container.append(header, body);
        document.body.appendChild(container);

        let isDragging = false, offsetX = 0, offsetY = 0;

        header.addEventListener('mousedown', e => {
            isDragging = true;
            offsetX = e.clientX - container.offsetLeft;
            offsetY = e.clientY - container.offsetTop;
            document.body.style.userSelect = 'none';
        });

        window.addEventListener('mousemove', e => {
            if (!isDragging) return;
            container.style.left = `${e.clientX - offsetX}px`;
            container.style.top = `${e.clientY - offsetY}px`;
        });

        window.addEventListener('mouseup', () => {
            isDragging = false;
            document.body.style.userSelect = '';
        });
    }


    switchTab(currentTab);
}

proxy();
</script>
</html>
